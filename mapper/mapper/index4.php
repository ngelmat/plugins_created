<?php

/**
 * $str SVG coordinates string
 * $factor number that multiply every coordinate (0-1)
 * $x translation on the x-axis
 * $y translation on the y-axis
 */
function svg2imap($str, $factor=1, $x=0, $y=0) {

    $res = "";

    $str = str_replace(array(" M ","M ", " C "," z "," z"),array("M","M","C","",""), $str);

    $polygons = explode("M", $str);

    for($i=0; $i<count($polygons); $i++) {

        if($polygons[$i]!="") {

            $res .= "<area shape=\"poly\" coords=\"";

            $coordinates = explode("C", $polygons[$i]);

            foreach( $coordinates as $position ) {

                $noise = explode(" ", trim($position));
                $point = explode(",", $noise[0]);

                for($j=0; $j<2; $j++) {

                    $val = round( $point[$j]*$factor, 0);

                    if($j==0)
                        $res .= ($val + $x).",";
                    else
                        $res .= ($val + $y).",";
                }
            }
            $res .= "\" href=\"link.html\" alt=\"desc\" />";
        }
    }

    return $res = str_replace(",\"","\"", $res);;
}
?>


<?php

//$svg = "M 6247.5037,5935.0511 C 6246.0707,5940.7838 6247.5037,5947.9495 C 6243.2043,5959.4149 z";
$svg = "M 139.24907,300.69963 c -3.39346,-3.51586 -8.26342,-0.7534 -11.00754,-0.64036 l -8.09228,8.31293 -9.30503,14.69217 c 0.47943,6.08714 0.25075,7.18612 1.63246,10.12126 2.20466,0.67076 4.8178,4.12794 -9.30504,12.89646 l -0.32649,3.42817 c -0.28898,2.31182 175.63156,2.67397 172.06157,0.32649 -5.45844,-3.58924 -6.63284,-4.25795 -9.40139,-8.54795 -3.4479,-5.3427 -5.45403,-10.22537 -5.45403,-10.22537 0.19583,-5.31609 1.45269,-12.37638 3.08339,-15.13623 1.59836,-2.70511 -0.55411,-5.44215 1.65076,-5.75929 -1.46223,-2.10722 -2.59447,-8.19099 -7.0196,-9.30504 -2.83344,-2.508 -4.83971,-3.64408 -4.63138,-5.02041 0.2947,-1.94688 -0.53302,-5.14215 -8.87853,-11.19612 -4.68194,-0.84331 -9.16006,-5.97404 -11.63,-11.20884 l 1.7957,-10.28451 -9.14179,-20.24254 c -4.50299,-0.87707 -5.47115,-7.42617 -5.87686,-14.36567 l 4.57089,-24.81344 -3.26492,-2.28544 -5.87687,-1.63247 -10.32389,6.66053 -4.66865,2.39544 -5.73974,2.37127 c -3.99344,2.14727 -5.99871,5.30143 -15.50839,13.22295 0.53484,-1.76028 -2.66075,0.0244 -8.65206,7.83582 2.87835,3.78599 -3.6331,2.94928 -7.12097,5.15258 l -2.6738,6.92764 1.96424,12.93769 3.56848,6.65529 -0.14559,7.66915 c -0.12866,8.52019 -7.44716,13.04885 -13.0597,22.20149 l -6.61147,5.06281 z";
$here = svg2imap($svg, $factor=0.33, $x=0, $y=0);
//highlight_string( $here );
echo $here;

?>